BT的诞生和突围

2001年4月，美国程序员Bram Cohen因为不满现存P2P服务的下载速度，自行设计了BitTorrent下载协议（感觉大佬都是一言不合就自己搞一个）。

对于传统的P2P程序，当用户下载文件时，他只会从一个用户那里下载文件，所以下载速度就被限制在了这两个用户之间的网络传输速度。

但是BitTorrent协议可以使得一个用户同时从多个用户那里下载数据，只要一个用户拥有该文件的数据片段，他就可能会向其它的下载该文件的用户分享数据。这样即使每个用户的上传带宽很小，大家合起来就会形成洪荒之力。

下面是Qdown的一个截图，大家可以从图中看到，我在下载该文件时，一共连接了9个客户端，下载速度为1.72MB/s（最下方的紫色框标注项为本机数据）。

其中有7个连接用户向我分享了文件（图中红色框标注），而我也向其中的一位用户分享了我的文件片段（绿色框标注）。
Qdown节点连接展示图

Cohen在2001年的夏天发布了他的第一个beta版的BitTorrent程序，但是该程序并没有立即流行起来。后来Cohen想了一个办法，他收集了非常多免费小姐姐的文件进行分享，诱惑人们使用BitTorrent程序并对其进行测试，这样BitTorrent就开始流行起来了。

到2004年夏天时，Cohen已经拥有了一个5个人组成的公司，他们致力于开发一款种子搜索引擎，使人们能够用它搜索文件并下载。从那时起，提供种子搜索功能的搜索引擎开始大量出现，其中包括：

    海盗湾（The Pirate Bay）
    MININOVA
    TORRENTZ

这些网站每月都会具有成百上千万次访问，并且一度成为互联网上访问人数前两百的网站，可想其火热程度之高。

流行种子Tracker服务器ISOHUNT宣称其上具有9857TB的文件在被分享，可能大家不是很理解这个数字的概念，我们举个例子，如果平均一部电影的大小为1GB，那么它上面有多少部电影呢？接近一千万部电影！

而这仅仅是一个服务器的数据，现在互联网上随手一抓都是几百个服务器，从此也可见现在的BT到底有多火。
版权挑战

和电驴一样，BT也面临着非常严重的版权问题，毕竟大量的流行音乐、电影、电视节目、合法的、非法的在BT网络中都免费和可获得。

通过海盗湾之类的搜索网站，用户可以很容易找到他们需要的内容，这首先就使得版权商非常不满（其中尤为突出的就是美国电影协会（MPAA）和美国唱片业协会（RIAA））。

2009年4月18日，海盗湾在瑞士被指控使用Tracker服务器促进了别人侵犯版权法，法庭上，其辩护律师坚称Tracker服务器可以被用于合法和非法用途，其是否合法是用户而非Tracker服务器的责任，Tracker服务器本身从来没有存储非法内容，它仅仅是简简单单地协调下载用户和已经拥有文件的用户进行文件分享（类比一下，某人买了一把菜刀拿去做了违法之事，难道要把卖刀的抓起来？）

最后，海盗湾的4名负责人被认定触犯了版权法，每个被罚款3百50万美元，并入狱1年。

许多人担心，认定BitTorrent为非法盗窃工具的判定结果，会使得该下载协议走向终结。即使现在，因为其容易被感知到的非法使用活动和大量的带宽占用，一些ISP（网络服务提供商）和网络会阻止BT协议的文件传输。
技术封锁

下面，我们讲讲来自于技术上的主要封锁，让大家明白，为什么现在的BT下载速度不稳定！

其一是来自于ISP的封锁（网络服务提供商，国内常见的如电信和联通等）。现在很多ISP都会阻断BT的下载流量，除了版权问题，他们封禁的主要理由还有：BT下载的流量过大，这会导致他们的设备过快老化。但是用户出了200M宽带的钱，最后它却告诉你，你不能达到200M的速度，因为达到了我们的设备就会老化过快，这是不是让人有点难受呢？

基于ISP的封锁，现在的BT协议已经远远不是当初Cohen设计的那个模样了。最初的BT协议里面，文件传输使用的是明文，也就是未加密的数据，这种情况会导致你的BT下载很容易被ISP检测到，只要一旦检测到可能数据传输就会被阻断，所以后来在BT协议里面增加了加密功能，这使得传输数据变为了密文。开启了加密功能后，ISP就不能再检测用户的传输数据。

其次，ISP还会封禁BT的常用端口，因为起初的客户端都会具有固定的端口，只要封禁该端口就会使得该客户端无法使用。这个很好突围，只要给用户方端口设定即可，现在的很多BT客户端都是使用的随机端口，就是防止ISP封锁固定的端口，造成一锅端的悲剧（Qdown 0.0.9开始支持端口随机）。

其二，是来自于吸血客户端的搅局。真正的BT客户端都是非常友好的，下载文件的同时都会默认上传一定的数据量，从而使整个BT网络能够长久发展下去。但是，总有一些不友好的客户端，只下载不上传，其中就有大家都熟知的某些版本的迅雷。

当这些客户端使用的人数过多时，就会造成整个BT网络中能下载的文件越来越少，这也是国内现在的BT环境面临的巨大问题。

当然，现在很多客户端都是支持屏蔽这些吸血客户端的，Qdown开启强制加密就能将迅雷屏蔽在外，但是就算是屏蔽了迅雷，迅雷在国内的用户基数大，很多问题是无法解决的。幸运的是现在迅雷面临着非常多的版权问题，这导致越来越多的人开始回归传统的BT下载工具。

针对吸血客户端，后面又演化出了PT（Private Torrent）下载协议（算是BT的分支）。在该协议里面，Tracker服务器会记录用户的上传流量，如果没有上行流量，那么该客户端会被该Tracker服务器禁掉，造成无法下载的结局。

其三，BT面临的另外一个挑战来自于越来越成熟的网盘。网盘和BT在用户心理具有相同的功能，都能用于分享文件，但是网盘看起来文件的有效期更长，使用起来也更方便，这也吸引了很多用户，前些年的网盘大战使得大量用户转投网盘。

后来百度网盘一家独大后大家都知道，第一是严重限速，第二是版权和相应的文件审查，现在这也导致用户开始慢慢转向BT。所以，后面的BT环境前景可期（但是变数也很多）。

其四，和eDonkey相同，Tracker服务器也面临着被查封的风险。例如，2009年，在音响反盗版协会（ALPA）的协助下，法国警方查获了该国最大的Tracker站点Snowtigers。

为了缓解对于Tracker服务器的依赖，和eDonkey相同，BT里面也加入了DHT（分布式哈希表）（关于DHT的原理，大家可以参考一下本专辑的上一篇文章《ed2k兴衰史》），使得现在的BT客户端即使没有Tracker服务器也能够下载文件（所以，DHT真是一个神奇的东西）。
BT存活的原因

上一篇文章里面，我们讲到eDonkey没能经受住打压，最后被迫停止了开发和维护，但是BT同样具有文件分享功能，也同样面临着版权问题，但为什么它就能活下来呢？

个人认为主要是BT的开放。eDonkey是闭源的商业程序，它的文件传输协议是没有公开的，也就是他想要一支独秀，结果给了版权商集中火力攻击的对象。但是BT不一样，BitTorrent的文件传输协议是公开的，该协议现在大家一同讨论，各种奇思妙想汇聚在一起，慢慢推进发展。

虽然BitTorrent是一家公司，但他也仅仅是基于开放的BT协议开发了自己的客户端，这样，只要你有编程能力和意向，你也可以开发一个客户端出来。所以我们现在看到的现象是，支持BT协议的客户端遍地开花，而且非常多的客户端是开源免费的，Tracker服务器也是网上一抓一大把，这种情况下会让很多版权商有心无力。

不说其它，就一个海盗湾，虽然时而被没收服务器，时而被罚款并逮捕入狱，但是今天依然顽强地存活着，再退一步，就算海盗湾倒闭了，后面还有无数个“海盗湾”在运行。可见，在BT面前，版权问题是多么得严峻。
BT的其它商业应用

现在，很多公司都开始使用BT协议来减轻服务器的负载。比如大家都熟悉的百度网盘，它的客户端就是集成了BT协议（或者说是经过修改后的BT协议），这样我们下载文件的时候，就可以不仅仅从服务器获取数据，也可以从其它安装了该客户端和具有该文件的用户那里下载，这就是前段时间被用户强烈抵制的“用户激励计划”。

除此而外，国内很多视频客户端都具有相类似的传输功能，你正在看的视频的缓存数据，会同时分享给其它正在看该视频的用户，而且很多进程不是用户能够关闭的，就算你关闭了桌面客户端，你也可以在用户进程里面找到相关的进程（有点像是“强制用户不激励计划”）。

好了，今天的故事就讲到这里，相信大家看了这篇文章，也能搞清很多内心的疑问。本专辑的下一篇文章，我们将感受海盗湾的传奇故事，那个打不死的小强！