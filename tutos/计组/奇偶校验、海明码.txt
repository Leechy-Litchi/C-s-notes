https://www.bilibili.com/video/BV1GF411V7sC

ECC校验可用于常规内存条中，现在服务器硬盘比如SATA/NVME常用LDPC（低密度奇偶校验码）

以2^n -1位置作为校验码核对一个区域内的奇偶

可以理解成将长条的数据化为正方形，而后以二分法判断对错
前四个海明码是第0、1、2、4号位
规律是出现奇数个1就是错误，偶数个则为正常
原理：奇数个1再算上校验码就是偶数个，偶数个1为0仍然是偶数。所以出现奇数个1则错误
第一个是整个数据的奇偶校验
假设有
0 1 0 1
1 1 1 0
0 0 1 1
0 1 0 1
首先看0号位是0，所以一共有偶数个1，然而总共有奇数个1，说明数据有错

1号位是1，算上它1的数量是偶数，2、4列为其管辖，正确

2号位管的3、4列是奇数，错误，取交集说明错误在第三列

4号位管辖2、4行，奇数，错误

8号位管辖3、4行，偶数，正确，取交集得知在第二行

所以错误在第二行第三列


大致占据的区域符合线段树，1号位是2的倍数，2号位是长度为2间隔为2,4号位长度为4间隔为4，所以可以抽象成为正方形的行和列
假如只有一段那便是如同上面8号位管辖这般的总体一半，又或者2号位正好是正方形边长一半然后拼凑出的右半






拓展



假如让海明码矩阵下标改为二进制数
在经过顺序的奇偶校验后的flag可以拼凑出错误位置
比如上面的校验（出现错误置1，正确则为0）是0110=6，正好是这个长条数字的第六位也即矩阵第二行第三列
这是因为奇偶校验的排列组合必然对应一个唯一的位置
可以发现，1号海明码对应的区域内元素的下标末位都是1，以外的下标末位都是0,2号对应的也是如此

如果将所有1的下标从上到下从左到右顺序排列
那么所有末位的1数量就是1号区域内1的总数
倒数第二位就是2号区域1的总数

将这个表每一列的元素异或，因为正确的话必然是偶数，所以异或后为0
每一列得出的结果异或结果也应该是0，否则就出错



常规用法

又或者说让每个1的坐标进行异或得到全是0，如果某个地方出错，则异或结果就是出错位置（当错误仅1个）

也因此海明码性能开销非常小